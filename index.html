<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Djiffy Documentation &#8212; Djiffy 1.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/style.css?v=386e93f4" />
    <script src="_static/documentation_options.js?v=8d563738"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Code Documentation" href="codedocs.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="djiffy-documentation">
<h1>Djiffy Documentation<a class="headerlink" href="#djiffy-documentation" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="codedocs.html">Code Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="codedocs.html#module-djiffy.models">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="codedocs.html#module-djiffy.views">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="codedocs.html#module-djiffy.importer">Import</a></li>
<li class="toctree-l2"><a class="reference internal" href="codedocs.html#manage-commands">Manage Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id1">1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id2">0.9.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id3">0.9.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id4">0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id5">0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id6">0.7.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id7">0.7.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id8">0.7.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id9">0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id10">0.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#maintenance-release">0.5.2 Maintenance release</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id11">0.5.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id12">0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id13">0.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id14">0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id15">0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id16">0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#initial-release">0.1 Initial release</a></li>
</ul>
</li>
</ul>
</div>
<p>Django application to index and display IIIF Manifests for books</p>
<a class="reference external image-reference" href="https://github.com/Princeton-CDH/djiffy/actions/workflows/unit_tests.yml"><img alt="Unit Tests status" src="https://github.com/Princeton-CDH/djiffy/actions/workflows/unit_tests.yml/badge.svg" />
</a>
<a class="reference external image-reference" href="https://codecov.io/gh/Princeton-CDH/djiffy"><img alt="Code Coverage" src="https://codecov.io/gh/Princeton-CDH/djiffy/branch/main/graph/badge.svg" />
</a>
<img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/djiffy" />
<img alt="PyPI - Django Version" src="https://img.shields.io/pypi/djversions/djiffy" />
<img alt="Sphinx Docs build status" src="https://github.com/Princeton-CDH/djiffy/actions/workflows/sphinx_docs.yml/badge.svg" />
<p><strong>djiffy</strong> is intended to be a reusable <a class="reference external" href="https://www.djangoproject.com/">Django</a> application for
working with digitized book-like content provided via <a class="reference external" href="http://iiif.io/api/presentation/2.1/">IIIF Presentation</a>
manifests.  This is an <em>alpha</em> version and it does <em>not</em> yet support
the full IIIF Presentation specification.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>djiffy is tested against Django 4.1-5.2 and Python 3.9-3.11.</p>
</div>
<p>Code documentation is available at <a class="reference external" href="https://princeton-cdh.github.io/djiffy/">https://princeton-cdh.github.io/djiffy/</a></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h2>
<p>Use pip to install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">djiffy</span>
</pre></div>
</div>
<p>You can also install from GitHub.  Use a branch or tag name, e.g.
<code class="docutils literal notranslate"><span class="pre">&#64;develop</span></code> or <code class="docutils literal notranslate"><span class="pre">&#64;1.0</span></code>, to install a specific tagged release or branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Princeton</span><span class="o">-</span><span class="n">CDH</span><span class="o">/</span><span class="n">djiffy</span><span class="o">.</span><span class="n">git</span><span class="nd">@develop</span><span class="c1">#egg=djiffy</span>
</pre></div>
</div>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h2>
<p>Add <cite>djiffy</cite> to installed applications and make sure that <cite>django.contrib.humanize</cite>
is also enabled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span>
    <span class="s1">&#39;django.contrib.humanize&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dal_select2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;djiffy&#39;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Include the default djiffy urls at the desired base url with the namespace
<cite>djiffy</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^iiif-books/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;djiffy.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s1">&#39;djiffy&#39;</span><span class="p">)),</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Run migrations to create database tables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">migrate</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The templates included require that you have a url configured with
the name <code class="docutils literal notranslate"><span class="pre">site-index</span></code>.</p>
</div>
<p>If you are need to use djiffy to access manifests that require an
authorization token, use <strong>DJIFFY_AUTH_TOKENS</strong> in your project settings
to configure each domain that requires an auth token.  The configuration
should be formatted like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DJIFFY_AUTH_TOKENS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;example.com&#39;</span><span class="p">:</span> <span class="s1">&#39;myauthtoken&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>Import IIIF content using the <cite>import_manifest</cite> manage command.  This
command can take an IIIF Collection or single Manifest, via local file
or URL.  Imported content can be viewed in Django admin.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">import_manifest</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">url</span><span class="o">.</span><span class="k">for</span><span class="o">/</span><span class="n">iiif</span><span class="o">/</span><span class="n">manifest</span>
<span class="n">python</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span> <span class="n">import_manifest</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">collection</span>
</pre></div>
</div>
</section>
<section id="development-instructions">
<h2>Development instructions<a class="headerlink" href="#development-instructions" title="Link to this heading">¶</a></h2>
<p>This git repository uses <a class="reference external" href="https://github.com/nvie/gitflow">git flow</a> branching conventions.</p>
<p>Initial setup and installation:</p>
<ul>
<li><p>recommended: create and activate a python 3.9 virtualenv:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">virtualenv</span> <span class="n">djiffy</span> <span class="o">-</span><span class="n">p</span> <span class="n">python3</span><span class="mf">.9</span>
<span class="n">source</span> <span class="n">djiffy</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
</li>
<li><p>pip install the package with its python dependencies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
<section id="upgrading-to-v1-0-0">
<h3>Upgrading to v1.0.0<a class="headerlink" href="#upgrading-to-v1-0-0" title="Link to this heading">¶</a></h3>
<p>If you have used any version of <code class="docutils literal notranslate"><span class="pre">djiffy</span></code> prior to v1.0.0, then it is required
to upgrade to v0.9.2 first, and run all migrations on your Django project. The
Django project must be running Django version 3.2 at this point.</p>
<p>After you have run those migrations, you can upgrade to any Django version 3.2+,
and install <code class="docutils literal notranslate"><span class="pre">djiffy</span></code> v1.0.0.</p>
</section>
<section id="unit-testing">
<h3>Unit Testing<a class="headerlink" href="#unit-testing" title="Link to this heading">¶</a></h3>
<p>Unit tests are written with <a class="reference external" href="http://doc.pytest.org/">py.test</a> but use some
Django test classes for convenience and compatibility with django test suites.
Running the tests requires a minimal settings file for Django required
configurations.</p>
<ul>
<li><p>Copy sample test settings and add a <strong>SECRET_KEY</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">ci</span><span class="o">/</span><span class="n">testsettings</span><span class="o">.</span><span class="n">py</span> <span class="n">testsettings</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>To run the tests, either use the configured setup.py test command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">test</span>
</pre></div>
</div>
</li>
<li><p>Or install test requirements and use py.test directly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="s1">&#39;.[test]&#39;</span>
<span class="n">pytest</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h3>
<p>Documentation is generated using <a class="reference external" href="http://www.sphinx-doc.org/">sphinx</a>.
To generate documentation, first install development requirements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">dev</span><span class="o">-</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Then build documentation using the customized make file in the <cite>docs</cite>
directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sphinx</span><span class="o">-</span><span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>As of v0.7.3, documentation is automatically built with GitHub Actions
and published using GitHub pages.</p>
</section>
<section id="adding-license-images">
<h3>Adding license images<a class="headerlink" href="#adding-license-images" title="Link to this heading">¶</a></h3>
<p>When adding new license image SVG files to this repo, add <code class="docutils literal notranslate"><span class="pre">id=&quot;licenseimg&quot;</span></code> to
the <code class="docutils literal notranslate"><span class="pre">&lt;svg&gt;</span></code> element of each. This allows djiffy users to embed the SVG inline
with a <code class="docutils literal notranslate"><span class="pre">&lt;use&gt;</span></code> tag, with its <code class="docutils literal notranslate"><span class="pre">href</span></code> attribute pointing to <code class="docutils literal notranslate"><span class="pre">#licenseimg</span></code>.</p>
<p>If the image will need to be recolored for different backgrounds, as in the
case of the <code class="docutils literal notranslate"><span class="pre">rightsstatement_org/</span></code> SVG icons, you can enable this for up to
two tones in each SVG. To do this, set <code class="docutils literal notranslate"><span class="pre">fill</span></code> attributes on paths to
<code class="docutils literal notranslate"><span class="pre">fill=&quot;inherit&quot;</span></code> (controlled by the <code class="docutils literal notranslate"><span class="pre">fill</span></code> CSS property) or
<code class="docutils literal notranslate"><span class="pre">fill=&quot;currentColor&quot;</span></code> (controlled by the <code class="docutils literal notranslate"><span class="pre">color</span></code> CSS property).</p>
</section>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Link to this heading">¶</a></h2>
<p><strong>djiffy</strong> is distributed under the Apache 2.0 License.</p>
<p>©2024 Trustees of Princeton University.  Permission granted via
Princeton Docket #20-3618 for distribution online under a standard Open Source
license.  Ownership rights transferred to Rebecca Koeser provided software
is distributed online via open source.</p>
</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">Djiffy</a></h1>



<p class="blurb">Django application to index and display IIIF Manifests for books</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=Princeton-CDH&repo=djiffy&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/Princeton-CDH/djiffy">
    <img
        alt="https://secure.travis-ci.org/Princeton-CDH/djiffy.svg?branch=master"
        src="https://secure.travis-ci.org/Princeton-CDH/djiffy.svg?branch=master"
    />
</a>
</p>




    

<p>
<a class="badge" href="https://codecov.io/github/Princeton-CDH/djiffy">
    <img
    alt="https://codecov.io/github/Princeton-CDH/djiffy/coverage.svg?branch=master"
    src="https://codecov.io/github/Princeton-CDH/djiffy/coverage.svg?branch=master"
    />
</a>
</p>
<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="codedocs.html">Code Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>


  <div>
    <h3><a href="#">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Djiffy Documentation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#development-instructions">Development instructions</a><ul>
<li><a class="reference internal" href="#upgrading-to-v1-0-0">Upgrading to v1.0.0</a></li>
<li><a class="reference internal" href="#unit-testing">Unit Testing</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#adding-license-images">Adding license images</a></li>
</ul>
</li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><div class="powered_by">
<p>Powered by:</p>
<a href="http://cdh.princeton.edu/">
<img src="https://cdh.princeton.edu/static/img/CDH_logo_01.svg"
    alt="Center for Digital Humanities @ Princeton" />
</a>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2017, CDH @ Princeton.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>